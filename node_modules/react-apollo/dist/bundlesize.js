"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}function makeEmptyFunction(t){return function(){return t}}var emptyFunction=function(){};emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(t){return t};var emptyFunction_1=emptyFunction,validateFormat=function(t){};function invariant(t,e,r,n,o,i,a,s){if(validateFormat(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,o,i,a,s],p=0;(c=new Error(e.replace(/%s/g,function(){return u[p++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}var invariant_1=invariant,getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function shouldUseNative(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}var objectAssign=shouldUseNative()?Object.assign:function(t,e){for(var r,n,o=toObject(t),i=1;i<arguments.length;i++){for(var a in r=Object(arguments[i]))hasOwnProperty.call(r,a)&&(o[a]=r[a]);if(getOwnPropertySymbols){n=getOwnPropertySymbols(r);for(var s=0;s<n.length;s++)propIsEnumerable.call(r,n[s])&&(o[n[s]]=r[n[s]])}}return o},ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret,factoryWithThrowingShims=function(){function t(t,e,r,n,o,i){i!==ReactPropTypesSecret_1&&invariant_1(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}var r={array:t.isRequired=t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return r.checkPropTypes=emptyFunction_1,r.PropTypes=r},propTypes=createCommonjsModule(function(t){t.exports=factoryWithThrowingShims()}),invariant$2=function(t,e,r,n,o,i,a,s){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,o,i,a,s],p=0;(c=new Error(e.replace(/%s/g,function(){return u[p++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}},invariant_1$1=invariant$2,hasOwnProperty$1=Object.prototype.hasOwnProperty;function is(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function shallowEqual(t,e){if(is(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(var o=0;o<r.length;o++)if(!hasOwnProperty$1.call(e,r[o])||!is(t[r[o]],e[r[o]]))return!1;return!0}var shallowEqual_1=shallowEqual,reactIs_production_min=createCommonjsModule(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,p=r?Symbol.for("react.async_mode"):60111,l=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.timeout"):60113;function d(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case n:switch(t=t.type){case p:case i:case s:case a:return t;default:switch(t=t&&t.$$typeof){case u:case l:case c:return t;default:return e}}case o:return e}}}e.typeOf=d,e.AsyncMode=p,e.ContextConsumer=u,e.ContextProvider=c,e.Element=n,e.ForwardRef=l,e.Fragment=i,e.Profiler=s,e.Portal=o,e.StrictMode=a,e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===i||t===p||t===s||t===a||t===f||"object"==typeof t&&null!==t&&(t.$$typeof===c||t.$$typeof===u||t.$$typeof===l)},e.isAsyncMode=function(t){return d(t)===p},e.isContextConsumer=function(t){return d(t)===u},e.isContextProvider=function(t){return d(t)===c},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===n},e.isForwardRef=function(t){return d(t)===l},e.isFragment=function(t){return d(t)===i},e.isProfiler=function(t){return d(t)===s},e.isPortal=function(t){return d(t)===o},e.isStrictMode=function(t){return d(t)===a}});unwrapExports(reactIs_production_min);var reactIs_production_min_1=reactIs_production_min.typeOf,reactIs_production_min_2=reactIs_production_min.AsyncMode,reactIs_production_min_3=reactIs_production_min.ContextConsumer,reactIs_production_min_4=reactIs_production_min.ContextProvider,reactIs_production_min_5=reactIs_production_min.Element,reactIs_production_min_6=reactIs_production_min.ForwardRef,reactIs_production_min_7=reactIs_production_min.Fragment,reactIs_production_min_8=reactIs_production_min.Profiler,reactIs_production_min_9=reactIs_production_min.Portal,reactIs_production_min_10=reactIs_production_min.StrictMode,reactIs_production_min_11=reactIs_production_min.isValidElementType,reactIs_production_min_12=reactIs_production_min.isAsyncMode,reactIs_production_min_13=reactIs_production_min.isContextConsumer,reactIs_production_min_14=reactIs_production_min.isContextProvider,reactIs_production_min_15=reactIs_production_min.isElement,reactIs_production_min_16=reactIs_production_min.isForwardRef,reactIs_production_min_17=reactIs_production_min.isFragment,reactIs_production_min_18=reactIs_production_min.isProfiler,reactIs_production_min_19=reactIs_production_min.isPortal,reactIs_production_min_20=reactIs_production_min.isStrictMode,reactIs_development=createCommonjsModule(function(t,e){});unwrapExports(reactIs_development);var _ReactIs$ForwardRef,reactIs_development_1=reactIs_development.typeOf,reactIs_development_2=reactIs_development.AsyncMode,reactIs_development_3=reactIs_development.ContextConsumer,reactIs_development_4=reactIs_development.ContextProvider,reactIs_development_5=reactIs_development.Element,reactIs_development_6=reactIs_development.ForwardRef,reactIs_development_7=reactIs_development.Fragment,reactIs_development_8=reactIs_development.Profiler,reactIs_development_9=reactIs_development.Portal,reactIs_development_10=reactIs_development.StrictMode,reactIs_development_11=reactIs_development.isValidElementType,reactIs_development_12=reactIs_development.isAsyncMode,reactIs_development_13=reactIs_development.isContextConsumer,reactIs_development_14=reactIs_development.isContextProvider,reactIs_development_15=reactIs_development.isElement,reactIs_development_16=reactIs_development.isForwardRef,reactIs_development_17=reactIs_development.isFragment,reactIs_development_18=reactIs_development.isProfiler,reactIs_development_19=reactIs_development.isPortal,reactIs_development_20=reactIs_development.isStrictMode,reactIs=createCommonjsModule(function(t){t.exports=reactIs_production_min});function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var React=require("react"),REACT_STATICS={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},TYPE_STATICS=_defineProperty({},reactIs.ForwardRef,(_defineProperty(_ReactIs$ForwardRef={},"$$typeof",!0),_defineProperty(_ReactIs$ForwardRef,"render",!0),_ReactIs$ForwardRef)),defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols$1=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=Object.prototype;function hoistNonReactStatics(t,e,r){if("string"==typeof e)return t;if(objectPrototype){var n=getPrototypeOf(e);n&&n!==objectPrototype&&hoistNonReactStatics(t,n,r)}var o=getOwnPropertyNames(e);getOwnPropertySymbols$1&&(o=o.concat(getOwnPropertySymbols$1(e)));for(var i=TYPE_STATICS[t.$$typeof]||REACT_STATICS,a=TYPE_STATICS[e.$$typeof]||REACT_STATICS,s=0;s<o.length;++s){var c=o[s];if(!(KNOWN_STATICS[c]||r&&r[c]||a&&a[c]||i&&i[c])){var u=getOwnPropertyDescriptor(e,c);try{defineProperty(t,c,u)}catch(t){}}}return t}var hoistNonReactStatics_cjs=hoistNonReactStatics,FUNC_ERROR_TEXT="Expected a function",MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();function apply(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function arrayPush(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var objectProto=Object.prototype,hasOwnProperty$2=objectProto.hasOwnProperty,objectToString=objectProto.toString,Symbol$1=root.Symbol,propertyIsEnumerable=objectProto.propertyIsEnumerable,spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0,nativeMax=Math.max;function baseFlatten(t,e,r,n,o){var i=-1,a=t.length;for(r||(r=isFlattenable),o||(o=[]);++i<a;){var s=t[i];0<e&&r(s)?1<e?baseFlatten(s,e-1,r,n,o):arrayPush(o,s):n||(o[o.length]=s)}return o}function baseRest(i,a){return a=nativeMax(void 0===a?i.length-1:a,0),function(){for(var t=arguments,e=-1,r=nativeMax(t.length-a,0),n=Array(r);++e<r;)n[e]=t[a+e];e=-1;for(var o=Array(a+1);++e<a;)o[e]=t[e];return o[a]=n,apply(i,this,o)}}function createFlow(e){return baseRest(function(r){var n=(r=baseFlatten(r,1)).length,t=n;for(e&&r.reverse();t--;)if("function"!=typeof r[t])throw new TypeError(FUNC_ERROR_TEXT);return function(){for(var t=0,e=n?r[t].apply(this,arguments):arguments[0];++t<n;)e=r[t].call(this,e);return e}})}function isFlattenable(t){return isArray(t)||isArguments(t)||!!(spreadableSymbol&&t&&t[spreadableSymbol])}function isArguments(t){return isArrayLikeObject(t)&&hasOwnProperty$2.call(t,"callee")&&(!propertyIsEnumerable.call(t,"callee")||objectToString.call(t)==argsTag)}var isArray=Array.isArray;function isArrayLike(t){return null!=t&&isLength(t.length)&&!isFunction(t)}function isArrayLikeObject(t){return isObjectLike(t)&&isArrayLike(t)}function isFunction(t){var e=isObject(t)?objectToString.call(t):"";return e==funcTag||e==genTag}function isLength(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=MAX_SAFE_INTEGER}function isObject(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function isObjectLike(t){return!!t&&"object"==typeof t}var flowRight=createFlow(!0),lodash_flowright=flowRight,reactApollo_browser_umd=createCommonjsModule(function(t,e){!function(t,b,o,i,f){var n,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),e=function(){function o(){this.children=null,this.added=!1}return o.prototype.has=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this;return t.every(function(t){var e=r.children&&r.children.get(t);return!(!e||!(r=e))})&&r.added},o.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this;t.forEach(function(t){var e=n.children||(n.children=new Map),r=e.get(t);r?n=r:e.set(t,n=new o)}),n.added=!0},o}(),a=function(){function t(){this.queryPromises=new Map,this.queryGraveyard=new e}return t.prototype.addQueryPromise=function(e,t){var r=e.props,n=r.query,o=r.variables;return this.queryGraveyard.has(n,JSON.stringify(o))?t():(this.queryPromises.set(e,new Promise(function(t){t(e.fetchData())})),null)},t.prototype.hasPromises=function(){return 0<this.queryPromises.size},t.prototype.consumeAndAwaitPromises=function(){var i=this,a=[];return this.queryPromises.forEach(function(t,e){var r=e.props,n=r.query,o=r.variables;i.queryGraveyard.add(n,JSON.stringify(o)),a.push(t)}),this.queryPromises.clear(),Promise.all(a)},t}(),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getChildContext=function(){return{renderPromises:this.props.renderPromises}},e.prototype.render=function(){return this.props.children},e.childContextTypes={renderPromises:o.object},e}(b.Component),c=invariant_1$1,u=function(t,e){return c(!!e.client,'Could not find "client" in the context of ApolloConsumer. Wrap the root component in an <ApolloProvider>'),t.children(e.client)};u.contextTypes={client:o.object.isRequired},u.propTypes={children:o.func.isRequired};var y,p,l,d=(p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),h=invariant_1$1,m=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.operations=new Map,h(t.client,'ApolloProvider was not passed a client instance. Make sure you pass in your client via the "client" prop.'),t.client.__operations_cache__||(t.client.__operations_cache__=r.operations),r}return d(t,n),t.prototype.getChildContext=function(){return{client:this.props.client,operations:this.props.client.__operations_cache__}},t.prototype.render=function(){return this.props.children},t.propTypes={client:o.object.isRequired,children:o.node.isRequired},t.childContextTypes={client:o.object.isRequired,operations:o.object},t}(b.Component),v=invariant_1$1;(l=y||(y={}))[l.Query=0]="Query",l[l.Mutation=1]="Mutation",l[l.Subscription=2]="Subscription";var _=new Map;function g(t){var e,r,n=_.get(t);if(n)return n;v(!!t&&!!t.kind,"Argument of "+t+" passed to parser was not a valid GraphQL DocumentNode. You may need to use 'graphql-tag' or another method to convert your operation into a document");var o=t.definitions.filter(function(t){return"FragmentDefinition"===t.kind}),i=t.definitions.filter(function(t){return"OperationDefinition"===t.kind&&"query"===t.operation}),a=t.definitions.filter(function(t){return"OperationDefinition"===t.kind&&"mutation"===t.operation}),s=t.definitions.filter(function(t){return"OperationDefinition"===t.kind&&"subscription"===t.operation});v(!o.length||i.length||a.length||s.length,"Passing only a fragment to 'graphql' is not yet supported. You must include a query, subscription or mutation as well"),v(i.length+a.length+s.length<=1,"react-apollo only supports a query, subscription, or a mutation per HOC. "+t+" had "+i.length+" queries, "+s.length+" subscriptions and "+a.length+" mutations. You can use 'compose' to join multiple operation types to a component"),r=i.length?y.Query:y.Mutation,i.length||a.length||(r=y.Subscription);var c=i.length?i:a.length?a:s;v(1===c.length,"react-apollo only supports one defintion per HOC. "+t+" had "+c.length+" definitions. You can use 'compose' to join multiple operation types to a component");var u=c[0];e=u.variableDefinitions||[];var p={name:u.name&&"Name"===u.name.kind?u.name.value:"data",type:r,variables:e};return _.set(t,p),p}var O=invariant_1$1;function w(t,e){var r=t.client||e.client;return O(!!r,'Could not find "client" in the context or passed in as a prop. Wrap the root component in an <ApolloProvider>, or pass an ApolloClient instance in via props.'),r}var P,j,S,I,R=(P=function(t,e){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}P(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),E=function(){return(E=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},C=shallowEqual_1,T=invariant_1$1,M=function(r){function t(t,e){var l=r.call(this,t,e)||this;return l.previousData={},l.hasMounted=!1,l.startQuerySubscription=function(){if(!l.querySubscription){var r=l.getQueryResult();l.querySubscription=l.queryObservable.subscribe({next:function(t){var e=t.data;r&&7===r.networkStatus&&C(r.data,e)?r=void 0:(r=void 0,l.updateCurrentData())},error:function(t){if(l.resubscribeToQuery(),!t.hasOwnProperty("graphQLErrors"))throw t;l.updateCurrentData()}})}},l.removeQuerySubscription=function(){l.querySubscription&&(l.querySubscription.unsubscribe(),delete l.querySubscription)},l.updateCurrentData=function(){l.hasMounted&&l.forceUpdate()},l.getQueryResult=function(){var t,e={data:Object.create(null)};if(Object.assign(e,{variables:(t=l.queryObservable).variables,refetch:t.refetch.bind(t),fetchMore:t.fetchMore.bind(t),updateQuery:t.updateQuery.bind(t),startPolling:t.startPolling.bind(t),stopPolling:t.stopPolling.bind(t),subscribeToMore:t.subscribeToMore.bind(t)}),l.props.skip)e=E({},e,{data:void 0,error:void 0,loading:!1});else{var r=l.queryObservable.currentResult(),n=r.loading,o=r.partial,i=r.networkStatus,a=r.errors,s=r.error;if(a&&0<a.length&&(s=new f.ApolloError({graphQLErrors:a})),Object.assign(e,{loading:n,networkStatus:i,error:s}),n)Object.assign(e.data,l.previousData,r.data);else if(s)Object.assign(e,{data:(l.queryObservable.getLastResult()||{}).data});else{var c=l.queryObservable.options.fetchPolicy,u=l.props.partialRefetch;if(u&&0===Object.keys(r.data).length&&o&&"cache-only"!==c)return Object.assign(e,{loading:!0,networkStatus:f.NetworkStatus.loading}),e.refetch(),e;Object.assign(e.data,r.data),l.previousData=r.data}}if(!l.querySubscription){var p=e.refetch;e.refetch=function(r){return l.querySubscription?p(r):new Promise(function(t,e){l.refetcherQueue={resolve:t,reject:e,args:r}})}}return e.client=l.client,e},l.client=w(t,e),l.initializeQueryObservable(t),l}return R(t,r),t.prototype.fetchData=function(){if(this.props.skip)return!1;var t=this.props,e=(t.children,t.ssr),r=(t.displayName,t.skip,t.client,t.onCompleted,t.onError,t.partialRefetch,function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]]);return r}(t,["children","ssr","displayName","skip","client","onCompleted","onError","partialRefetch"])),n=r.fetchPolicy;if(!1===e)return!1;"network-only"!==n&&"cache-and-network"!==n||(n="cache-first");var o=this.client.watchQuery(E({},r,{fetchPolicy:n})),i=this.queryObservable.currentResult();return!!i.loading&&o.result()},t.prototype.componentDidMount=function(){if(this.hasMounted=!0,!this.props.skip&&(this.startQuerySubscription(),this.refetcherQueue)){var t=this.refetcherQueue,e=t.args,r=t.resolve,n=t.reject;this.queryObservable.refetch(e).then(r).catch(n)}},t.prototype.componentWillReceiveProps=function(t,e){if(!t.skip||this.props.skip){var r=w(t,e);C(this.props,t)&&this.client===r||(this.client!==r&&(this.client=r,this.removeQuerySubscription(),this.queryObservable=null,this.previousData={},this.updateQuery(t)),this.props.query!==t.query&&this.removeQuerySubscription(),this.updateQuery(t),t.skip||this.startQuerySubscription())}else this.removeQuerySubscription()},t.prototype.componentWillUnmount=function(){this.removeQuerySubscription(),this.hasMounted=!1},t.prototype.componentDidUpdate=function(){var t=this.props,e=t.onCompleted,r=t.onError;if(e||r){var n=this.queryObservable.currentResult(),o=n.loading,i=n.error,a=n.data;!e||o||i?r&&!o&&i&&r(i):e(a)}},t.prototype.render=function(){var t=this,e=this.context,r=function(){return t.props.children(t.getQueryResult())};return e&&e.renderPromises?e.renderPromises.addQueryPromise(this,r):r()},t.prototype.extractOptsFromProps=function(t){var r,e=t.variables,n=t.pollInterval,o=t.fetchPolicy,i=t.errorPolicy,a=t.notifyOnNetworkStatusChange,s=t.query,c=t.displayName,u=void 0===c?"Query":c,p=t.context,l=void 0===p?{}:p;return this.operation=g(s),T(this.operation.type===y.Query,"The <Query /> component requires a graphql query, but got a "+(this.operation.type===y.Mutation?"mutation":"subscription")+"."),r={variables:e,pollInterval:n,query:s,fetchPolicy:o,errorPolicy:i,notifyOnNetworkStatusChange:a,metadata:{reactComponent:{displayName:u}},context:l},Object.keys(r).reduce(function(t,e){return void 0!==r[e]&&(t[e]=r[e]),t},{})},t.prototype.initializeQueryObservable=function(t){var e=this.extractOptsFromProps(t);this.setOperations(e),this.queryObservable=this.client.watchQuery(e)},t.prototype.setOperations=function(t){this.context.operations&&this.context.operations.set(this.operation.name,{query:t.query,variables:t.variables})},t.prototype.updateQuery=function(t){this.queryObservable?this.setOperations(t):this.initializeQueryObservable(t),this.queryObservable.setOptions(this.extractOptsFromProps(t)).catch(function(){return null})},t.prototype.resubscribeToQuery=function(){this.removeQuerySubscription();var t=this.queryObservable.getLastError(),e=this.queryObservable.getLastResult();this.queryObservable.resetLastResults(),this.startQuerySubscription(),Object.assign(this.queryObservable,{lastError:t,lastResult:e})},t.contextTypes={client:o.object,operations:o.object,renderPromises:o.object},t.propTypes={client:o.object,children:o.func.isRequired,fetchPolicy:o.string,notifyOnNetworkStatusChange:o.bool,onCompleted:o.func,onError:o.func,pollInterval:o.number,query:o.object.isRequired,variables:o.object,ssr:o.bool,partialRefetch:o.bool},t}(b.Component),q=(I=function(t,e){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}I(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),A=function(){return(A=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},x=invariant_1$1,F=shallowEqual_1,k={loading:!1,called:!1,error:void 0,data:void 0},N=function(r){function t(t,e){var d=r.call(this,t,e)||this;return d.hasMounted=!1,d.runMutation=function(t){void 0===t&&(t={}),d.onMutationStart();var e=d.generateNewMutationId();return d.mutate(t).then(function(t){return d.onMutationCompleted(t,e),t}).catch(function(t){if(d.onMutationError(t,e),!d.props.onError)throw t})},d.mutate=function(t){var e=d.props,r=e.mutation,n=e.variables,o=e.optimisticResponse,i=e.update,a=e.context,s=void 0===a?{}:a,c=e.awaitRefetchQueries,u=void 0!==c&&c,p=A({},t),l=p.refetchQueries||d.props.refetchQueries;l&&l.length&&Array.isArray(l)&&(l=l.map(function(t){return"string"==typeof t&&d.context.operations&&d.context.operations.get(t)||t}),delete p.refetchQueries);var f=Object.assign({},n,p.variables);return delete p.variables,d.client.mutate(A({mutation:r,optimisticResponse:o,refetchQueries:l,awaitRefetchQueries:u,update:i,context:s,variables:f},p))},d.onMutationStart=function(){d.state.loading||d.props.ignoreResults||d.setState({loading:!0,error:void 0,data:void 0,called:!0})},d.onMutationCompleted=function(t,e){if(!1!==d.hasMounted){var r=d.props,n=r.onCompleted,o=r.ignoreResults,i=t.data,a=t.errors,s=a&&0<a.length?new f.ApolloError({graphQLErrors:a}):void 0,c=function(){return n?n(i):null};d.isMostRecentMutation(e)&&!o?d.setState({loading:!1,data:i,error:s},c):c()}},d.onMutationError=function(t,e){if(!1!==d.hasMounted){var r=d.props.onError,n=function(){return r?r(t):null};d.isMostRecentMutation(e)?d.setState({loading:!1,error:t},n):n()}},d.generateNewMutationId=function(){return d.mostRecentMutationId=d.mostRecentMutationId+1,d.mostRecentMutationId},d.isMostRecentMutation=function(t){return d.mostRecentMutationId===t},d.verifyDocumentIsMutation=function(t){var e=g(t);x(e.type===y.Mutation,"The <Mutation /> component requires a graphql mutation, but got a "+(e.type===y.Query?"query":"subscription")+".")},d.client=w(t,e),d.verifyDocumentIsMutation(t.mutation),d.mostRecentMutationId=0,d.state=k,d}return q(t,r),t.prototype.componentDidMount=function(){this.hasMounted=!0},t.prototype.componentWillUnmount=function(){this.hasMounted=!1},t.prototype.componentWillReceiveProps=function(t,e){var r=w(t,e);F(this.props,t)&&this.client===r||(this.props.mutation!==t.mutation&&this.verifyDocumentIsMutation(t.mutation),this.client!==r&&(this.client=r,this.setState(k)))},t.prototype.render=function(){var t=this.props.children,e=this.state,r=e.loading,n=e.data,o=e.error,i=e.called,a={called:i,loading:r,data:n,error:o,client:this.client};return t(this.runMutation,a)},t.contextTypes={client:o.object.isRequired,operations:o.object},t.propTypes={mutation:o.object.isRequired,variables:o.object,optimisticResponse:o.object,refetchQueries:o.oneOfType([o.arrayOf(o.oneOfType([o.string,o.object])),o.func]),awaitRefetchQueries:o.bool,update:o.func,children:o.func.isRequired,onCompleted:o.func,onError:o.func},t}(b.Component),Q=(S=function(t,e){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}S(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),$=shallowEqual_1,D=function(r){function t(t,e){var o=r.call(this,t,e)||this;return o.initialize=function(t){o.queryObservable||(o.queryObservable=o.client.subscribe({query:t.subscription,variables:t.variables,fetchPolicy:t.fetchPolicy}))},o.startSubscription=function(){o.querySubscription||(o.querySubscription=o.queryObservable.subscribe({next:o.updateCurrentData,error:o.updateError}))},o.getInitialState=function(){return{loading:!0,error:void 0,data:void 0}},o.updateCurrentData=function(t){var e=o,r=e.client,n=e.props.onSubscriptionData;n&&n({client:r,subscriptionData:t}),o.setState({data:t.data,loading:!1,error:void 0})},o.updateError=function(t){o.setState({error:t,loading:!1})},o.endSubscription=function(){o.querySubscription&&(o.querySubscription.unsubscribe(),delete o.querySubscription)},o.client=w(t,e),o.initialize(t),o.state=o.getInitialState(),o}return Q(t,r),t.prototype.componentDidMount=function(){this.startSubscription()},t.prototype.componentWillReceiveProps=function(t,e){var r=w(t,e);if(!$(this.props.variables,t.variables)||this.client!==r||this.props.subscription!==t.subscription){var n=t.shouldResubscribe;"function"==typeof n&&(n=!!n(this.props,t));var o=!1===n;if(this.client!==r&&(this.client=r),!o)return this.endSubscription(),delete this.queryObservable,this.initialize(t),this.startSubscription(),void this.setState(this.getInitialState());this.initialize(t),this.startSubscription()}},t.prototype.componentWillUnmount=function(){this.endSubscription()},t.prototype.render=function(){var t=this.props.children;if(!t)return null;var e=Object.assign({},this.state,{variables:this.props.variables});return t(e)},t.contextTypes={client:o.object.isRequired},t.propTypes={subscription:o.object.isRequired,variables:o.object,children:o.func,onSubscriptionData:o.func,shouldResubscribe:o.oneOfType([o.func,o.bool])},t}(b.Component),W=(j=function(t,e){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}j(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),L=invariant_1$1,G=function(){return{}},U=function(){return!1};function z(t){return t.displayName||t.name||"Component"}function Y(t,e,r,n){for(var o={},i=0,a=t.variables;i<a.length;i++){var s=a[i],c=s.variable,u=s.type;if(c.name&&c.name.value){var p=c.name.value,l=e[p];if(void 0===l)if("NonNullType"===u.kind){if(t.type===y.Mutation)return;L(void 0!==l,"The operation '"+t.name+"' wrapping '"+n+"' is expecting a variable: '"+c.name.value+"' but it was not found in the props passed to '"+r+"'")}else o[p]=null;else o[p]=l}}return o}var V,X=function(r){function t(t){var e=r.call(this,t)||this;return e.withRef=!1,e.setWrappedInstance=e.setWrappedInstance.bind(e),e}return W(t,r),t.prototype.getWrappedInstance=function(){return L(this.withRef,"To access the wrapped instance, you need to specify { withRef: true } in the options"),this.wrappedInstance},t.prototype.setWrappedInstance=function(t){this.wrappedInstance=t},t}(b.Component),H=(V=function(t,e){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}V(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),J=function(){return(J=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},K=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]]);return r},B=hoistNonReactStatics_cjs;function Z(n,d){void 0===d&&(d={});var o=g(n),t=d.options,e=void 0===t?G:t,r=d.skip,i=void 0===r?U:r,a=d.alias,s=void 0===a?"Apollo":a,c=e;"function"!=typeof c&&(c=function(){return e});var y,h=i;return"function"!=typeof h&&(h=function(){return i}),function(f){var r=s+"("+z(f)+")",t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.render=function(){var u=this,p=this.props,l=h(p),t=l?Object.create(null):J({},c(p));return!l&&!t.variables&&0<o.variables.length&&(t.variables=Y(o,p,r,z(f))),b.createElement(M,J({},t,{displayName:r,skip:l,query:n,warnUnhandledError:!0}),function(t){t.client;var e,r,n=t.data,o=K(t,["client","data"]);if(d.withRef&&(u.withRef=!0,p=Object.assign({},p,{ref:u.setWrappedInstance})),l)return b.createElement(f,J({},p));var i=Object.assign(o,n||{}),a=d.name||"data",s=((e={})[a]=i,e);if(d.props){var c=((r={})[a]=i,r.ownProps=p,r);y=d.props(c,y),s=y}return b.createElement(f,J({},p,s))})},e.displayName=r,e.WrappedComponent=f,e}(X);return B(t,f,{})}}var tt,et=(tt=function(t,e){return(tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}tt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),rt=function(){return(rt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},nt=hoistNonReactStatics_cjs;function ot(n,u){void 0===u&&(u={});var o=g(n),t=u.options,e=void 0===t?G:t,r=u.alias,i=void 0===r?"Apollo":r,a=e;return"function"!=typeof a&&(a=function(){return e}),function(c){var r=i+"("+z(c)+")",t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return et(e,t),e.prototype.render=function(){var s=this.props,t=a(s);return u.withRef&&(this.withRef=!0,s=Object.assign({},s,{ref:this.setWrappedInstance})),!t.variables&&0<o.variables.length&&(t.variables=Y(o,s,r,z(c))),b.createElement(N,rt({},t,{mutation:n,ignoreResults:!0}),function(t,e){var r,n,o=u.name||"mutate",i=((r={})[o]=t,r);if(u.props){var a=((n={})[o]=t,n.ownProps=s,n);i=u.props(a)}return b.createElement(c,rt({},s,i))})},e.displayName=r,e.WrappedComponent=c,e}(X);return nt(t,c,{})}}var it,at=(it=function(t,e){return(it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}it(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),st=function(){return(st=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ct=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]]);return r},ut=hoistNonReactStatics_cjs;function pt(n,d){void 0===d&&(d={});var o=g(n),t=d.options,e=void 0===t?G:t,r=d.skip,i=void 0===r?U:r,a=d.alias,s=void 0===a?"Apollo":a,c=d.shouldResubscribe,y=e;"function"!=typeof y&&(y=function(){return e});var h,m=i;return"function"!=typeof m&&(m=function(){return i}),function(f){var e=s+"("+z(f)+")",t=function(r){function t(t){var e=r.call(this,t)||this;return e.state={resubscribe:!1},e}return at(t,r),t.prototype.componentWillReceiveProps=function(t){c&&this.setState({resubscribe:c(this.props,t)})},t.prototype.render=function(){var u=this,p=this.props,l=m(p),t=l?Object.create(null):y(p);return!l&&!t.variables&&0<o.variables.length&&(t.variables=Y(o,p,e,z(f))),b.createElement(D,st({},t,{displayName:e,skip:l,subscription:n,shouldResubscribe:this.state.resubscribe}),function(t){var e,r,n=t.data,o=ct(t,["data"]);if(d.withRef&&(u.withRef=!0,p=Object.assign({},p,{ref:u.setWrappedInstance})),l)return b.createElement(f,st({},p));var i=Object.assign(o,n||{}),a=d.name||"data",s=((e={})[a]=i,e);if(d.props){var c=((r={})[a]=i,r.ownProps=p,r);h=d.props(c,h),s=h}return b.createElement(f,st({},p,s))})},t.displayName=e,t.WrappedComponent=f,t}(X);return ut(t,f,{})}}var lt,ft=(lt=function(t,e){return(lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}lt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),dt=function(){return(dt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},yt=invariant_1$1,ht=hoistNonReactStatics_cjs,mt=lodash_flowright;t.compose=mt,t.getDataFromTree=function(e,r){void 0===r&&(r=i.renderToStaticMarkup);var n=new a;function o(){var t=r(b.createElement(s,{renderPromises:n,children:e}));return n.hasPromises()?n.consumeAndAwaitPromises().then(o):t}return Promise.resolve().then(o)},t.ApolloConsumer=u,t.ApolloProvider=m,t.Query=M,t.Mutation=N,t.Subscription=D,t.graphql=function(t,e){switch(void 0===e&&(e={}),g(t).type){case y.Mutation:return ot(t,e);case y.Subscription:return pt(t,e);case y.Query:default:return Z(t,e)}},t.withApollo=function(n,o){void 0===o&&(o={});var t,e="withApollo("+((t=n).displayName||t.name||"Component")+")",r=function(r){function t(t){var e=r.call(this,t)||this;return e.setWrappedInstance=e.setWrappedInstance.bind(e),e}return ft(t,r),t.prototype.getWrappedInstance=function(){return yt(o.withRef,"To access the wrapped instance, you need to specify { withRef: true } in the options"),this.wrappedInstance},t.prototype.setWrappedInstance=function(t){this.wrappedInstance=t},t.prototype.render=function(){var r=this;return b.createElement(u,null,function(t){var e=Object.assign({},r.props,{client:t,ref:o.withRef?r.setWrappedInstance:void 0});return b.createElement(n,dt({},e))})},t.displayName=e,t.WrappedComponent=n,t}(b.Component);return ht(r,n,{})},t.RenderPromises=a,t.walkTree=function e(t,r,n,o){var i,a;if(void 0===o&&(o=new Map),t)if(Array.isArray(t))t.forEach(function(t){return e(t,r,n,o)});else if(t.type)if("function"==typeof t.type){var s=t.type,c=Object.assign({},s.defaultProps,(a=t).props||a.attributes),u=r,p=void 0;if((i=s).prototype&&(i.prototype.render||i.prototype.isReactComponent)){var l=new s(c,r);if(Object.defineProperty(l,"props",{value:l.props||c}),l.context=l.context||r,l.state=l.state||null,l.setState=function(t){"function"==typeof t&&(t=t(l.state,l.props,l.context)),l.state=Object.assign({},l.state,t)},s.getDerivedStateFromProps){var f=s.getDerivedStateFromProps(l.props,l.state);null!==f&&(l.state=Object.assign({},l.state,f))}else l.UNSAFE_componentWillMount?l.UNSAFE_componentWillMount():l.componentWillMount&&l.componentWillMount();if(l.getChildContext&&(u=Object.assign({},r,l.getChildContext())),!1===n(t,l,o,r,u))return;p=l.render()}else{if(!1===n(t,null,o,r))return;p=s(c,r)}p&&(Array.isArray(p)?p.forEach(function(t){return e(t,u,n,o)}):e(p,u,n,o))}else if(t.type._context||t.type.Consumer){if(!1===n(t,null,o,r))return;var p=void 0;if(t.type._context)(o=new Map(o)).set(t.type,t.props.value),p=t.props.children;else{var d=t.type._currentValue;o.has(t.type.Provider)&&(d=o.get(t.type.Provider)),p=t.props.children(d)}p&&(Array.isArray(p)?p.forEach(function(t){return e(t,r,n,o)}):e(p,r,n,o))}else{if(!1===n(t,null,o,r))return;t.props&&t.props.children&&b.Children.forEach(t.props.children,function(t){t&&e(t,r,n,o)})}else"string"!=typeof t&&"number"!=typeof t||n(t,null,o,r)},Object.defineProperty(t,"__esModule",{value:!0})}(e,require("react"),propTypes,require("react-dom/server"),require("apollo-client"))}),reactApollo_browser_umd$1=unwrapExports(reactApollo_browser_umd);exports.default=reactApollo_browser_umd$1;
